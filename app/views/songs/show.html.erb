
<h1><%= "\"#{@song.title}\"" %></h1>

<div class="center-wrapper">
  
  <%= image_tag("/images/songs/#{@song.id}.jpg", class: 'song-artwork') %>

  <div class="song-artists">
    <%= raw(display_song_artist_with_link(@song)) %>
  </div>

  <div class="song-rating">
    <%= tag.span @song.display_rating, class: "rating #{@song.rating_color}" %>
    <% if @song.display_symbol? %>
      <span class="symbol">
        <% if @song.is_acclaimed %>ðŸ’Ž<% end %><%= @song.display_fondness %>
      </span>
    <% end %>
  </div>

  <% if @entrance.present? %>
    <ul class="icon-list">
      <li class="icon-list__el">
        <% peak_link = entries_index_path(year: @peak.year, week: @peak.week) %>
        <%= 
          link_to(
            'ï¸ï¸â›°ï¸', entries_index_path(year: @peak.year, week: @peak.week),
            class: 'icon symbol block-link'
          )
        %>
        <div class="icon-text">
          <a href="<%= peak_link %>">
            <span class="peak-position">#<%= @peak.position %></span>, 
            <%= @peak.week_start.strftime('%-d %B %Y') %>
          </a>
        </div>
      </li>
    </ul>
  <% end %>
  <% if @entrance.present? %>
    <ul class="icon-list">
      <li class="icon-list__el">
        <%
          start_link = entries_index_path(
            year: @entrance.year, week: @entrance.week
          )
        %>
        <%= 
          link_to(
            'ï¸ï¸â†—ï¸', start_link,
            class: 'icon symbol block-link'
          )
        %>
        <div class="icon-text">
          <%= link_to(@entrance.week_start.strftime('%-d %B %Y'),
                      start_link)
          %>
        </div>
      </li>
      <% 
        if (@song.stat_date.present? and
            @song.stat_date.median_year.present? and
            @song.stat_date.median_week.present?)
      %>
        <li class="icon-list__el">
          <%
            median_link = entries_index_path(
              year: @song.stat_date.median_year, 
              week: @song.stat_date.median_week
            )
          %>
          <%= 
            link_to(
              'ï¸ï¸âš–ï¸', median_link,
              class: 'icon symbol block-link'
            )
          %>
          <div class="icon-text">
            <%= link_to @song.median_date.strftime('%-d %B %Y'), median_link %>
          </div>
        </li>
      <% end %>
      <li class="icon-list__el">
        <%
          ending_link = entries_index_path(year: @exit.year, week: @exit.week)
        %>
        <%= 
          link_to(
            'â†˜ï¸', ending_link,
            class: 'icon symbol block-link'
          )
        %>
        <div class="icon-text">
          <%= link_to @exit.week_end.strftime('%-d %B %Y'), ending_link %>
        </div>
      </li>
    </ul>
  <% end %>

  <% if @song.stream_link.present? and @song.video_link.present? %>
    <ul class="icon-list">
      <% if @song.stream_link.present? %>
        <li class="icon-list__el">
          <%= 
            link_to(
              'ðŸŽ§', @song.stream_link,
              class: 'icon symbol block-link',
              rel: 'external', target: '_blank'
            )
          %>
          <div class="icon-text">
            <%= link_to 'Stream', @song.stream_link %>
          </div>
        </li>
      <% end %>
      <% if @song.video_link.present? %>
        <li class="icon-list__el">
          <%= 
            link_to(
              'ðŸ“º', @song.video_link,
              class: 'icon symbol block-link',
              rel: 'external', target: '_blank'
            )
          %>
          <div class="icon-text">
            <%= link_to 'Video', @song.video_link %>
          </div>
        </li>
      <% end %>
    </ul>
  <% end %>

  <ul class="action-list">
    <li class="action-list__el">
      <%= 
        link_to(
          'ï¸âœï¸ï¸ï¸', edit_song_path(@song),
          class: 'icon--small symbol block-link'
        )
      %>
      <div class="icon-text--small">
        <%= link_to "Edit", edit_song_path(@song) %>
      </div>
    </li>
  </ul>


</div>


<%= link_to '+', new_song_path, class: 'create-button' %>